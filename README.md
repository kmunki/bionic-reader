# Bionic Reader

A bespoke PWA for reading RSS feeds and Twitter bookmarks with bionic reading formatting.

**Live**: https://reader.kmunk.com (or bionic-reader-5r2.pages.dev)

## What It Does

- Displays RSS feeds and Twitter bookmarks in one unified reader
- Applies bionic reading (bolds first ~40% of each word) for faster reading
- Tracks read/starred state per device (localStorage)
- Pull-to-refresh on mobile
- Offline-capable via service worker
- Dark mode, minimal UI

## Architecture

```
[Nightly jobs @ 3am/4am]              [Cloudflare Pages]
         │                                    │
         ▼                                    │
   twitter-bookmarks scraper                  │
         │                                    │
         ▼                                    │
   twitter-digest.py ──► data/twitter.json ──┤
                                             ├──► PWA UI
   rss-digest.py ──────► data/rss.json ──────┤
         │                                    │
         ▼                                    │
   git push to GitHub ──► auto-deploy ────────┘
```

## Data Flow

1. **Nightly jobs** (launchd on Mac):
   - 3am: Twitter bookmarks scraper → `twitter-digest.py` → `data/twitter.json` → git push
   - 4am: `rss-digest.py` → `data/rss.json` → git push

2. **Cloudflare Pages**: Auto-deploys on push to main

3. **PWA**: Fetches JSON on load/pull-to-refresh, renders with bionic formatting

## Files

```
bionic-reader/
├── index.html        # App shell
├── app.js            # Main app logic, state management
├── bionic.js         # Bionic text transformation
├── style.css         # Dark mode styling
├── manifest.json     # PWA manifest
├── sw.js             # Service worker for offline
├── icon-*.png        # App icons
└── data/
    ├── rss.json      # Generated by rss-digest.py
    └── twitter.json  # Generated by twitter-digest.py
```

## Related Files (in kgm-brain-vault)

- `System/scripts/rss-digest.py` - Fetches RSS, outputs markdown + JSON
- `System/scripts/twitter-digest.py` - Processes bookmarks, outputs markdown + JSON
- `System/tools/twitter-bookmarks/` - Puppeteer scraper for X.com bookmarks
- `System/feeds.opml` - RSS feed list (export from Reeder)
- `~/Library/LaunchAgents/com.kylem.rss-digest.plist` - Nightly RSS job
- `~/Library/LaunchAgents/com.kylem.twitter-bookmarks.plist` - Nightly Twitter job

## Manual Refresh

To update data outside the nightly schedule:

```bash
# RSS
python3 "~/Library/Mobile Documents/iCloud~md~obsidian/Documents/kgm-brain-vault/System/scripts/rss-digest.py" --days 1

# Twitter (if cookies are fresh)
python3 "~/Library/Mobile Documents/iCloud~md~obsidian/Documents/kgm-brain-vault/System/scripts/twitter-digest.py" --days 7

# Push to deploy
cd ~/projects/bionic-reader
git add data/ && git commit -m "Update data" && git push
```

## Customization

- **Categories**: Edit `CATEGORIES` dict in `rss-digest.py` and `categorize_bookmark()` in `twitter-digest.py`
- **Bionic intensity**: Adjust the ratio in `bionic.js` (currently 40%)
- **Styling**: Edit `style.css` (CSS variables at top)
- **Feeds**: Update `System/feeds.opml` (export from Reeder)

## Maintenance

- **Twitter cookies expire**: Re-export from X.com DevTools → `System/tools/twitter-bookmarks/cookies.json`
- **Add/remove feeds**: Update `feeds.opml`, categories will auto-assign or fall to "Other"
- **PWA not updating**: Hard refresh or clear service worker in DevTools
